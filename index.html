<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>EBFL Spin & Collect - Moving Selector</title>
<style>
    body { font-family: sans-serif; text-align: center; background: #0d0d0d; color: #fff; }
    h1 { margin-top: 20px; color: #e63946; }
    #cardContainer { display: flex; justify-content: center; align-items: center; height: 200px; overflow: hidden; margin: 20px auto; width: 100%; max-width: 400px; }
    .card { width: 70px; height: 100px; background: #333; border: 3px solid #555; border-radius: 8px; margin: 0 5px; display: flex; justify-content: center; align-items: center; font-size: 11px; transition: transform 0.2s, border 0.2s; }
    .highlight { border: 3px solid #e63946; transform: scale(1.1); }
    .reveal { background: #e63946; color: #fff; transform: scale(1.2); }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; background: #e63946; color: #fff; border: none; border-radius: 5px; margin-top: 10px; }
    button:disabled { background: #555; cursor: not-allowed; }
    #collection { margin-top: 20px; }
    ul { list-style: none; padding: 0; }
    li { margin: 5px 0; }
</style>
</head>
<body>
    <h1>EBFL Spin & Collect</h1>
    <div id="cardContainer"></div>
    <button id="spinButton">SPIN</button>
    <div id="result"></div>
    <div id="collection">
        <h2>Your Collection</h2>
        <ul id="collectionList"></ul>
    </div>

<script>
const prizes = [
    "💰 EP", "💎 EC", "🪙 Discord Coin", "🥉 Bronze Badge Card",
    "🥈 Silver Badge Card", "🥇 Gold Badge Card", "🏆 HoF Badge Card",
    "🔧 Upgrade Badge", "⚡ Basic Attribute", "⚡ Standard Attribute",
    "⚡ Premium Attribute", "⬆️ Increase Attribute Limit",
    "🟡 Hotzone Neutral", "🔵 Hotzone Cold", "🔴 Hotzone Hot",
    "❄️ Cold Zone Removal", "💥 Dunk Package", "🩰 Layup Package"
];

const cardContainer = document.getElementById('cardContainer');
const spinButton = document.getElementById('spinButton');
const result = document.getElementById('result');
const collectionList = document.getElementById('collectionList');

let collection = JSON.parse(localStorage.getItem('collection')) || [];
updateCollectionUI();

spinButton.addEventListener('click', () => {
    spinButton.disabled = true;
    result.textContent = '';
    cardContainer.innerHTML = '';

    const shuffled = [...prizes];
    for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }

    const displayPrizes = shuffled.slice(0, 5);
    const cards = [];

    displayPrizes.forEach(prize => {
        const card = document.createElement('div');
        card.className = 'card';
        card.textContent = "🎴";
        cardContainer.appendChild(card);
        cards.push(card);
    });

    let current = 0;
    let cycles = 0;
    const maxCycles = 33; // ~10s if interval = 300ms

    const highlightInterval = setInterval(() => {
        cards.forEach(card => card.classList.remove('highlight'));
        cards[current].classList.add('highlight');
        current = (current + 1) % cards.length;
        cycles++;
        if (cycles >= maxCycles) {
            clearInterval(highlightInterval);

            // Reveal final prize
            const finalIndex = (current - 1 + cards.length) % cards.length;
            const prize = displayPrizes[finalIndex];
            cards.forEach((card, idx) => {
                if(idx === finalIndex){
                    card.textContent = prize;
                    card.classList.remove('highlight');
                    card.classList.add('reveal');
                    result.textContent = `You won: ${prize}`;
                    collection.push(prize);
                    localStorage.setItem('collection', JSON.stringify(collection));
                    updateCollectionUI();
                } else {
                    card.style.opacity = '0.3';
                    card.classList.remove('highlight');
                }
            });
            spinButton.disabled = false;
        }
    }, 300);
});

function updateCollectionUI() {
    collectionList.innerHTML = '';
    collection.forEach((item, index) => {
        const li = document.createElement('li');
        li.textContent = item;
        const useButton = document.createElement('button');
        useButton.textContent = 'Use';
        useButton.style.marginLeft = '10px';
        useButton.addEventListener('click', () => {
            collection.splice(index, 1);
            localStorage.setItem('collection', JSON.stringify(collection));
            updateCollectionUI();
        });
        li.appendChild(useButton);
        collectionList.appendChild(li);
    });
}
</script>
</body>
</html>
